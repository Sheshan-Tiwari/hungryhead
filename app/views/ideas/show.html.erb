<div class="container p-b-60">

  <div class="col-md-4 col-lg-4 col-sm-4 no-padding p-l-15">
    <%= render partial: 'ideas/sidebar' %>
  </div>

  <div class="col-md-8 col-lg-8 col-sm-8">
    <% cache(["idea_header", @idea, @idea.in_team?(current_user) ? "team" : "guest"]) do %>
      <div class="auto-height box-shadow ">
        <%= render partial: 'header' %>
      </div>
    <% end %>

    <%= render partial: 'menu' %>

    <div class="m-t-20">
      <div class="idea-content">
        <div class="clearfix">
          <% cache(["idea_main_content", @idea, @idea.in_team?(current_user) ? "team" : "guest"]) do %>
            <% sections = render(template: 'ideas/show.json.jbuilder') %>
            <%= react_component('MainContent', {data: sections}) %>
          <% end %>
        </div>
        <% if !policy(@idea).collaborator? %>
        <div class="idea-action-links m-t-20">
          <div class="panel box-shadow">
            <div class="panel-heading text-center">
              <div class="panel-title">
                To receive updates from <%= @idea.name %>, please consider following:
              </div>
            </div>
            <div class="panel-body">
              <div class="col-md-2 auto-margin">
                <%= react_component('Follow',{:followed => followed?(@idea)}) %>
              </div>
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>

</div>

<% if user_signed_in? && policy(@idea).collaborator? %>
  <div class="idea-collaboration-floating-panel">
    <%= render 'collaboration' %>
  </div>
<% end %>


